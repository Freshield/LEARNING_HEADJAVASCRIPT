<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title></title>
    <script language="javascript">
        //var seats = new Array(new Array(9),new Array(9),new Array(9),new Array(9));//false,true,false,true,true,true,false,true,false,true);
        var seats = [[ false, true, false, true, true, true, false, true, false ],
            [ false, true, false, false, true, false, true, true, true ],
            [ true, true, true, true, true, true, false, true, false ],
            [ true, true, true, false, true, false, false, true, true ]];
        var selSeat = -1;

        //preload part
        var imageIndex = 0;
        //!!!!!!!!HERE NEED SOME CHANGE
        var Imgs = new Array(3);
        //preload image
        function preload(){

            for(var i = 0;i<Imgs.length;i++){
                Imgs[i] = new Image();
                downloading(i);

            }

        }
        //downloading one image
        function downloading(i){

            imageIndex = i;
            //!!!!!!!!!!HERE IS THE NAME NEED SOME CHANGE
            //imageIndex = i;
            //Imgs[i].src = "cnscene"+imageIndex+".png";
            //Imgs[i].onload;
            if(i == 0){
                Imgs[i].src = "seat_avail.png";
                Imgs[i].onload;
            }
            if(i == 1){
                Imgs[i].src = "seat_unavail.png";
                Imgs[i].onload;
            }if(i == 2){
                Imgs[i].src = "seat_select.png";
                Imgs[i].onload;
            }
        }

        function initSeats(){
            for(var i = 0;i<seats.length;i++){
                for(var j = 0;j<seats[i].length;j++){
                    if(seats[i][j]){
                        setSeat(i*seats[i].length+j,"avail","Available seat");

                    }
                    else{
                        setSeat(i*seats[i].length+j,"unavail","Unabailable seat");
                    }

                }
            }



        }

        function findSeat(){
            //If seat is already selected
            if(selSeat >= 0){
                selSeat = -1;
                initSeats();
            }
            //search seats
            for(var i = 0;i < seats.length;i++){
                for(var j = 0;j<seats[i].length;j++){
                    if(seats[i][j] && seats[i][j+1] && seats[i][j+2]){
                        selSeat = i;
                        setSeat(i*seats[i].length+j,"select","Your seat");
                        setSeat(i*seats[i].length+j+1,"select","Your seat");
                        setSeat(i*seats[i].length+j+2,"select","Your seat");

                        var accept = confirm("Seat " + ((i*seats[i].length+j)+1)+"is available. Accept?");
                        if(accept){

                            i = seats.length+1;
                            break;
                        }
                        else{
                            selSeat = -1;

                            setSeat(i*seats[i].length+j,"avail","Available seat");
                            setSeat(i*seats[i].length+j+1,"avail","Available seat");
                            setSeat(i*seats[i].length+j+2,"avail","Available seat");

                        }


                    }

                }


            }

        }

        function setSeat(seatNum, status, description) {
            document.getElementById("seat" + seatNum).src = "seat_" + status + ".png";
            document.getElementById("seat" + seatNum).alt = description;
            alert("setSeat"+seatNum+status);
        }

        function getSeatStatus(seatNum) {
            alert("getseatstatus"+seatNum);
            if (selSeat != -1 && (seatNum == selSeat || seatNum == (selSeat + 1) || seatNum == (selSeat + 2)))

                return "yours";
            else if (seats[Math.floor(seatNum / seats[0].length)][seatNum % seats[0].length])


                return "available";
            else


                return "unavailable";
        }

        function showSeatStatus(seatNum) {
            alert("This seat is " + getSeatStatus(seatNum) + ".");

        }

        // Wire the events
        window.onload = function() {

            // Initialize the seat appearances
            preload();
            initSeats();
            // Wire the Find Seat button event
            document.getElementById("findseat").onclick = findSeat;
            // Wire the seat image events
            for(var i = 0;i<35;i++){
                (function(a){
                    document.getElementById("seat"+a).onclick = function() { showSeatStatus(a);};
                })(i);



            }
            /*
            document.getElementById("seat0").onclick = function() { showSeatStatus(0); };
            document.getElementById("seat1").onclick = function(evt) { showSeatStatus(1); };
            document.getElementById("seat2").onclick = function(evt) { showSeatStatus(2); };
            document.getElementById("seat3").onclick = function(evt) { showSeatStatus(3); };
            document.getElementById("seat4").onclick = function(evt) { showSeatStatus(4); };
            document.getElementById("seat5").onclick = function(evt) { showSeatStatus(5); };
            document.getElementById("seat6").onclick = function(evt) { showSeatStatus(6); };
            document.getElementById("seat7").onclick = function(evt) { showSeatStatus(7); };
            document.getElementById("seat8").onclick = function(evt) { showSeatStatus(8); };
            document.getElementById("seat9").onclick = function(evt) { showSeatStatus(9); };
            document.getElementById("seat10").onclick = function(evt) { showSeatStatus(10); };
            document.getElementById("seat11").onclick = function(evt) { showSeatStatus(11); };
            document.getElementById("seat12").onclick = function(evt) { showSeatStatus(12); };
            document.getElementById("seat13").onclick = function(evt) { showSeatStatus(13); };
            document.getElementById("seat14").onclick = function(evt) { showSeatStatus(14); };
            document.getElementById("seat15").onclick = function(evt) { showSeatStatus(15); };
            document.getElementById("seat16").onclick = function(evt) { showSeatStatus(16); };
            document.getElementById("seat17").onclick = function(evt) { showSeatStatus(17); };
            document.getElementById("seat18").onclick = function(evt) { showSeatStatus(18); };
            document.getElementById("seat19").onclick = function(evt) { showSeatStatus(19); };
            document.getElementById("seat20").onclick = function(evt) { showSeatStatus(20); };
            document.getElementById("seat21").onclick = function(evt) { showSeatStatus(21); };
            document.getElementById("seat22").onclick = function(evt) { showSeatStatus(22); };
            document.getElementById("seat23").onclick = function(evt) { showSeatStatus(23); };
            document.getElementById("seat24").onclick = function(evt) { showSeatStatus(24); };
            document.getElementById("seat25").onclick = function(evt) { showSeatStatus(25); };
            document.getElementById("seat26").onclick = function(evt) { showSeatStatus(26); };
            document.getElementById("seat27").onclick = function(evt) { showSeatStatus(27); };
            document.getElementById("seat28").onclick = function(evt) { showSeatStatus(28); };
            document.getElementById("seat29").onclick = function(evt) { showSeatStatus(29); };
            document.getElementById("seat30").onclick = function(evt) { showSeatStatus(30); };
            document.getElementById("seat31").onclick = function(evt) { showSeatStatus(31); };
            document.getElementById("seat32").onclick = function(evt) { showSeatStatus(32); };
            document.getElementById("seat33").onclick = function(evt) { showSeatStatus(33); };
            document.getElementById("seat34").onclick = function(evt) { showSeatStatus(34); };
            document.getElementById("seat35").onclick = function(evt) { showSeatStatus(35); };
*/

        };
        /*<img id="seat0" src="seat_unavail.png" alt="Unavailable" />
         <img id="seat1" src="seat_avail.png" alt="Available" />
         <img id="seat2" src="seat_unavail.png" alt="Unavailable" />
         <img id="seat3" src="seat_avail.png" alt="Available" />
         <img id="seat4" src="seat_avail.png" alt="Available" />
         <img id="seat5" src="seat_avail.png" alt="Available" />
         <img id="seat6" src="seat_unavail.png" alt="Unavailable" />
         <img id="seat7" src="seat_avail.png" alt="Available" />
         <img id="seat8" src="seat_unavail.png" alt="Unavailable" />*/
    </script>
<body>
<div style="margin-top:75px; text-align:center">
    <img id="seat0" src="" alt="" />
    <img id="seat1" src="" alt="" />
    <img id="seat2" src="" alt="" />
    <img id="seat3" src="" alt="" />
    <img id="seat4" src="" alt="" />
    <img id="seat5" src="" alt="" />
    <img id="seat6" src="" alt="" />
    <img id="seat7" src="" alt="" />
    <img id="seat8" src="" alt="" /><br />
    <img id="seat9" src="" alt="" />
    <img id="seat10" src="" alt="" />
    <img id="seat11" src="" alt="" />
    <img id="seat12" src="" alt="" />
    <img id="seat13" src="" alt="" />
    <img id="seat14" src="" alt="" />
    <img id="seat15" src="" alt="" />
    <img id="seat16" src="" alt="" />
    <img id="seat17" src="" alt="" /><br />
    <img id="seat18" src="" alt="" />
    <img id="seat19" src="" alt="" />
    <img id="seat20" src="" alt="" />
    <img id="seat21" src="" alt="" />
    <img id="seat22" src="" alt="" />
    <img id="seat23" src="" alt="" />
    <img id="seat24" src="" alt="" />
    <img id="seat25" src="" alt="" />
    <img id="seat26" src="" alt="" /><br />
    <img id="seat27" src="" alt="" />
    <img id="seat28" src="" alt="" />
    <img id="seat29" src="" alt="" />
    <img id="seat30" src="" alt="" />
    <img id="seat31" src="" alt="" />
    <img id="seat32" src="" alt="" />
    <img id="seat33" src="" alt="" />
    <img id="seat34" src="" alt="" />
    <img id="seat35" src="" alt="" /><br />
    <input type="button" id="findseat" value="Find Seat"/>
</div>
</body>
